{% extends "layout.html" %}
{% block title %} - Home{% endblock %}
{% block head %}
  {{ super() }}
  <style type="text/css">
    .important { color: #336699; }
  </style>
{% endblock %}
{% block content %}
<div class="recording-bg h-100">
  {%if filterResults and filterResults|length > 0%}
  <div class="container d-flex align-items-center flex-column">
    <!-- Masthead Heading-->
    <h1 class="masthead-heading text-uppercase mb-0 mt-4">Results</h1>
    <!-- Icon Divider-->
    <div class="divider-custom divider-dark">
      <div class="divider-custom-line"></div>
    </div>

    <div id="filteredResultsList" data-filtered="{{filterResults}}"></div>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md">
        <h2 class="masthead-heading text-uppercase mb-0 mt-4">Main Search</h1>
        <div class="divider-custom2 divider-dark">
          <div class="divider-custom2-line"></div>
        </div>
        <img class="img-fluid" src="https://i.ytimg.com/vi/le0BLAEO93g/maxresdefault.jpg"  alt="" />
        <div class="row">
          <div class="col">
            <h3 class="masthead-subheading text-uppercase font-weight-heavy mb-1">
              <span id = "resultsMainSearchTitle">
                  {{filterResults[0]['song'].title}}

              </span>
            </h3>
          </div>
          <div class="col">
            <h3 class="masthead-subheading text-uppercase font-weight-heavy text-right mb-1">
              <span id = "resultsMainSearchPercentage" class="text-right" style="color: rgb(0, 145, 0)">
                  {{(filterResults[0]['percent_match']*100)|round(2)}}%
              </span>
            </h3>
          </div>
        </div>
        <h4 id = "resultsMainSearchArtist" class="masthead-subheading text-uppercase font-weight-light mb-1">
            {{filterResults[0]['song'].artist}}
        </h4> 
        <div id="module" class="container mb-3">
          <p id = "resultsMainSearchLyrics" class="collapse multiline" aria-expanded="false">
{{lyrics}}
          </p>
          <a role="button" class="collapsed" data-toggle="collapse" href="#resultsMainSearchLyrics" aria-expanded="false" aria-controls="resultsMainSearchLyrics"></a>
        </div>
      </div>

      <div class="col-md">
        <h2 class="masthead-heading text-uppercase mb-0 mt-4">Related Searches</h2>
        <div class="divider-custom2 divider-dark">
          <div class="divider-custom2-line"></div>
        </div>
        <table id = "resultsSecondaryTable" class="table">
          <thead>
            <tr>
              <th scope="col">Song Title</th>
              <th scope="col">Song Artist</th>
              <th scope="col">Match Percentage</th>
              <th scope="col">Sample Audio Preview</th>
            </tr>
          </thead>
          <tbody id = "resultsSecondaryTableBody">
            {% for song_result in filterResults %}
              <tr>
                <td>{{ song_result.song.title }}</td>
                <td>{{ song_result.song.artist }}</td>
                <td>{{ (song_result.percent_match*100)|round(2) }}%</td>
                <td>
                  <audio controls="controls">
                    <source src="{{ song_result.song.preview }}" type="audio/mpeg"/>
                  </audio>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% else %} 
  <div class="container d-flex align-items-center flex-column">
    <!-- Masthead Heading-->
    <h1 class="masthead-heading text-uppercase mb-0 mt-4">No Results</h1>
    <!-- Icon Divider-->
    <div class="divider-custom divider-dark">
      <div class="divider-custom-line"></div>
    </div>

    <div id="filteredResultsList" data-filtered="{{filterResults}}"></div>
  </div>
  <div class="container d-flex align-items-center flex-column">
    <p class="text-muted">We couldn't find any matches to your <span style="color: #1f93ff; font-weight: bold;">Rhythm Recording</span> in our search!  Here are some tips to recording the rhythm for a better result.  </p>
    <h3 class="mb-1 text-secondary text-uppercase text-left">Tips </h3>
    <ol class="mb-2 mt-2" type="1">
      <li>Try to keep the rhythm as consistent as possible, specifically the pauses in between.</li>
      <li>The best number of beats to record is between 8-20.</li>
      <li>Use the playback button to confirm that it sounds correct to you.</li>
      <li>Record a different part of the song that you remember.</li>
      <li>Try <span style="color: #fd6161; font-weight: bold;">Recording Melody</span> instead!</li>
    </ol> 
    <div class = "row">
      <button class="btn btn-third mt-4" data-dismiss="modal" onclick="goToRhythm()">
        Tap Again
      </button>
      <button class="btn btn-primary mt-4 ml-3" data-dismiss="modal" onclick="goToMelody()">
        Try Melody
      </button>
    </div>
  </div>
  {%endif%}


</div>
{% endblock %}